<!DOCTYPE html>
<html>

<head>
  <title>Quarkus - Datasources</title>
  <script id="adobe_dtm" src="https://www.redhat.com/dtm.js" type="text/javascript"></script>
  <script src="/assets/javascript/highlight.pack.js" type="text/javascript"></script>
  <META HTTP-EQUIV='Content-Security-Policy' CONTENT="default-src 'none'; script-src 'self' 'unsafe-eval' 'sha256-ANpuoVzuSex6VhqpYgsG25OHWVA1I+F6aGU04LoI+5s=' 'sha256-ipy9P/3rZZW06mTLAR0EnXvxSNcnfSDPLDuh3kzbB1w=' js.bizographics.com https://www.redhat.com assets.adobedtm.com jsonip.com https://ajax.googleapis.com https://www.googletagmanager.com https://www.google-analytics.com https://use.fontawesome.com; style-src 'self' https://fonts.googleapis.com https://use.fontawesome.com; img-src 'self' *; media-src 'self' ; frame-src https://www.googletagmanager.com https://www.youtube.com; frame-ancestors 'none'; base-uri 'none'; object-src 'none'; form-action 'none'; font-src 'self' https://use.fontawesome.com https://fonts.gstatic.com;">
  <META HTTP-EQUIV='X-Frame-Options' CONTENT="DENY">
  <META HTTP-EQUIV='X-XSS-Protection' CONTENT="1; mode=block">
  <META HTTP-EQUIV='X-Content-Type-Options' CONTENT="nosniff">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Quarkus: Supersonic Subatomic Java">
  <link rel="canonical" href="https://quarkus.io/guides/datasource">
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="https://quarkus.io/guides/stylesheet/config.css" />
  <link rel="stylesheet" href="/assets/css/main.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <link rel="alternate" type="application/rss+xml"  href="https://quarkus.io/feed.xml" title="Quarkus">
  <script src="https://quarkus.io/assets/javascript/goan.js" type="text/javascript"></script>
  <script src="https://quarkus.io/assets/javascript/hl.js" type="text/javascript"></script>
</head>

<body class="guides">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJWS5L"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <div class="navigation-wrapper">
  <div class="width-12-12">
    <div class="header navigation">
      <div class="logo-wrapper">
        
          <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_600px_reverse.png" class="project-logo" title="Quarkus"></a>
        
      </div>
      <div class="nav-container">
        <nav>
          <div class="nav-mobile"><a id="nav-toggle" href="#!"><span></span></a></div>
          <ul class="nav-list">
            <li>
              <a href="/get-started/" class="">Get Started</a>
            </li>
            <li>
              <a href="/guides/" class="active">Guides</a>
            </li>
            <li>
              <a href="/community/" class="">Community</a>
            </li>
            <li>
              <a href="/blog/" class="">Blog</a>
            </li>
            <li>
              <a href="https://code.quarkus.io" class="button-cta secondary white">Start Coding</a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</div>

  <div class="content">
    <div class="guide">
  <div class="width-12-12">
    <h1 class="text-caps">Quarkus - Datasources</h1>
    <div class="hide-mobile toc"><ul class="sectlevel1">
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#creating-the-maven-project">Creating the Maven project</a></li>
<li><a href="#adding-maven-dependencies">Adding maven dependencies</a></li>
<li><a href="#configuring-the-datasource">Configuring the datasource</a>
<ul class="sectlevel2">
<li><a href="#jdbc-url-configurations">JDBC URL configurations</a></li>
</ul>
</li>
<li><a href="#injecting-a-datasource">Injecting a Datasource</a></li>
<li><a href="#multiple-datasources">Multiple Datasources</a>
<ul class="sectlevel2">
<li><a href="#named-datasource-injection">Named Datasource Injection</a></li>
</ul>
</li>
<li><a href="#datasource-health-check">Datasource Health Check</a></li>
<li><a href="#datasource-metrics">Datasource Metrics</a></li>
<li><a href="#narayana-transaction-manager-integration">Narayana Transaction Manager integration</a></li>
<li><a href="#in-memory-databases">Testing with in-memory databases</a></li>
<li><a href="#configuration-reference">Agroal Configuration Reference</a></li>
</ul></div>
    <div>
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Many projects that use data require connections to a relational database.</p>
</div>
<div class="paragraph">
<p>The main way of obtaining connections to a database is to use a datasource and configure a JDBC driver.</p>
</div>
<div class="paragraph">
<p>In Quarkus, the preferred datasource and connection pooling implementation is <a href="https://agroal.github.io/">Agroal</a>.</p>
</div>
<div class="paragraph">
<p>Agroal is a modern, light weight connection pool implementation designed for very high performance and scalability,
and features first class integration with the other components in Quarkus, such as security, transaction management components, health metrics.</p>
</div>
<div class="paragraph">
<p>This guide will explain how to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>configure a datasource, or multiple datasources</p>
</li>
<li>
<p>how to obtain a reference to those datasources in code</p>
</li>
<li>
<p>which pool tuning configuration properties are available</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisites"><a class="anchor" href="#prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To complete this guide, you will need:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>less than 10 minutes</p>
</li>
<li>
<p>an IDE</p>
</li>
<li>
<p>JDK 1.8+ installed with <code>JAVA_HOME</code> configured appropriately</p>
</li>
<li>
<p>Apache Maven 3.5.3+</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-the-maven-project"><a class="anchor" href="#creating-the-maven-project"></a>Creating the Maven project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, we need a new project. Create a new project with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="shell" class="language-shell hljs">mvn io.quarkus:quarkus-maven-plugin:1.2.1.Final:create \
    -DprojectGroupId=org.acme \
    -DprojectArtifactId=agroal-quickstart \
    -DclassName="org.acme.datasource.GreetingResource" \
    -Dpath="/hello"
cd agroal-quickstart</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will generate:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the Maven structure</p>
</li>
<li>
<p>a landing page accessible on <code><a href="http://localhost:8080" class="bare">http://localhost:8080</a></code></p>
</li>
<li>
<p>an example <code>Dockerfile</code> files for both <code>native</code> and <code>jvm</code> modes</p>
</li>
<li>
<p>the application configuration file</p>
</li>
<li>
<p>an <code>org.acme.datasource.GreetingResource</code> resource</p>
</li>
<li>
<p>an example integration test</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="adding-maven-dependencies"><a class="anchor" href="#adding-maven-dependencies"></a>Adding maven dependencies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Next, you will need to add the <code>quarkus-agroal</code> dependency to your project.</p>
</div>
<div class="paragraph">
<p>You can add it using a simple Maven command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="shell" class="language-shell hljs">./mvnw quarkus:add-extension -Dextensions="agroal"</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Agroal comes as a transitive dependency of the Hibernate ORM extension so if you are using Hibernate ORM,
you don&#8217;t need to add the Agroal extension dependency explicitly.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You will also need to choose, and add, the Quarkus extension for your relational database driver.</p>
</div>
<div class="paragraph">
<p>Quarkus provides driver extensions for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>H2 - jdbc-h2</p>
</li>
<li>
<p>PostgreSQL - jdbc-postgresql</p>
</li>
<li>
<p>MariaDB - jdbc-mariadb</p>
</li>
<li>
<p>MySQL - jdbc-mysql</p>
</li>
<li>
<p>Microsoft SQL Server - jdbc-mssql</p>
</li>
<li>
<p>Derby - jdbc-derby</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The H2 and Derby databases can normally be configured to run in "embedded mode"; the extension does not support compiling the embedded database engine into native images.</p>
</div>
<div class="paragraph">
<p>Read <a href="#in-memory-databases">Testing with in-memory databases</a> (below) for suggestions regarding integration testing.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As usual, you can install the extension using <code>add-extension</code>.</p>
</div>
<div class="paragraph">
<p>To install the PostgreSQL driver dependency for instance, just run the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="shell" class="language-shell hljs">./mvnw quarkus:add-extension -Dextensions="jdbc-postgresql"</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-the-datasource"><a class="anchor" href="#configuring-the-datasource"></a>Configuring the datasource</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once the dependencies are added to your pom.xml file, you&#8217;ll need to configure Agroal.</p>
</div>
<div class="paragraph">
<p>This is done in the <code>src/main/resources/application.properties</code> file.</p>
</div>
<div class="paragraph">
<p>A viable configuration file would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.url=jdbc:h2:tcp://localhost/mem:default
quarkus.datasource.driver=org.h2.Driver
quarkus.datasource.username=username-default
quarkus.datasource.min-size=3
quarkus.datasource.max-size=13</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are other configuration options, detailed below.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
For more information about the Agroal extension configuration please refer to the <a href="#configuration-reference">Configuration Reference</a>.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="jdbc-url-configurations"><a class="anchor" href="#jdbc-url-configurations"></a>JDBC URL configurations</h3>
<div class="paragraph">
<p>Each of the supported databases contains different JDBC URL configuration options.
Going into each of those options is beyond the scope of this document, but it gives an overview of each database URL and link to the official documentation.</p>
</div>
<div class="sect3">
<h4 id="h2"><a class="anchor" href="#h2"></a>H2</h4>
<div class="paragraph">
<p><code>jdbc:h2:{ {.|mem:}[name] | [file:]fileName | {tcp|ssl}:[//]server[:port][,server2[:port]]/name }[;key=value&#8230;&#8203;]</code></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Example</dt>
<dd>
<p><code>jdbc:h2:tcp://localhost/~/test</code>, <code>jdbc:h2:mem:myDB</code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>H2 is an embedded database.
It can run as a server, based on a file, or live completely in memory.
All of these options are available as listed above.
You can find more information at the <a href="https://h2database.com/html/features.html?highlight=url&amp;search=url#database_url">official documentation</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="postgresql"><a class="anchor" href="#postgresql"></a>PostgreSQL</h4>
<div class="paragraph">
<p>PostgreSQL only runs as a server, as do the rest of the databases below.
As such, you must specify connection details, or use the defaults.</p>
</div>
<div class="paragraph">
<p><code>jdbc:postgresql:[//][host][:port][/database][?key=value&#8230;&#8203;]</code></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Example</dt>
<dd>
<p><code>jdbc:postgresql://localhost/test</code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Defaults for the different parts are as follows:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>host</code></dt>
<dd>
<p>localhost</p>
</dd>
<dt class="hdlist1"><code>port</code></dt>
<dd>
<p>5432</p>
</dd>
<dt class="hdlist1"><code>database</code></dt>
<dd>
<p>same name as the username</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The <a href="https://jdbc.postgresql.org/documentation/head/connect.html">official documentation</a> go into more detail and list optional parameters as well.</p>
</div>
</div>
<div class="sect3">
<h4 id="mariadb"><a class="anchor" href="#mariadb"></a>MariaDB</h4>
<div class="paragraph">
<p><code>jdbc:mariadb:[replication:|failover:|sequential:|aurora:]//&lt;hostDescription&gt;[,&lt;hostDescription&gt;&#8230;&#8203;]/[database][?&lt;key1&gt;=&lt;value1&gt;[&amp;&lt;key2&gt;=&lt;value2&gt;]]</code>
 hostDescription:: <code>&lt;host&gt;[:&lt;portnumber&gt;]  or address=(host=&lt;host&gt;)[(port=&lt;portnumber&gt;)][(type=(master|slave))]</code></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Example</dt>
<dd>
<p><code>jdbc:mariadb://localhost:3306/test</code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>You can find more information about this feature and others detailed in the <a href="https://mariadb.com/kb/en/library/about-mariadb-connector-j/">official documentation</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="mysql"><a class="anchor" href="#mysql"></a>MySQL</h4>
<div class="paragraph">
<p><code>jdbc:mysql:[replication:|failover:|sequential:|aurora:]//&lt;hostDescription&gt;[,&lt;hostDescription&gt;&#8230;&#8203;]/[database][?&lt;key1&gt;=&lt;value1&gt;[&amp;&lt;key2&gt;=&lt;value2&gt;]]</code>
 hostDescription:: <code>&lt;host&gt;[:&lt;portnumber&gt;]  or address=(host=&lt;host&gt;)[(port=&lt;portnumber&gt;)][(type=(master|slave))]</code></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Example</dt>
<dd>
<p><code>jdbc:mysql://localhost:3306/test</code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>You can find more information about this feature and others detailed in the <a href="https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-reference.html">official documentation</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="microsoft-sql-server"><a class="anchor" href="#microsoft-sql-server"></a>Microsoft SQL Server</h4>
<div class="paragraph">
<p>Microsoft SQL Server takes a connection URL in the following form:</p>
</div>
<div class="paragraph">
<p><code>jdbc:sqlserver://[serverName[\instanceName][:portNumber]][;property=value[;property=value]]</code></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Example</dt>
<dd>
<p><code>jdbc:sqlserver://localhost:1433;databaseName=AdventureWorks</code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The Microsoft SQL Server JDBC driver works essentially the same as the others.
More details can be found in the <a href="https://docs.microsoft.com/en-us/sql/connect/jdbc/connecting-to-sql-server-with-the-jdbc-driver?view=sql-server-2017">official documentation</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="derby"><a class="anchor" href="#derby"></a>Derby</h4>
<div class="paragraph">
<p><code>jdbc:derby:[//serverName[:portNumber]/][memory:]databaseName[;property=value[;property=value]]</code></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Example</dt>
<dd>
<p><code>jdbc:derby://localhost:1527/myDB</code>, <code>jdbc:derby:memory:myDB;create=true</code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Derby is an embedded database.
It can run as a server, based on a file, or live completely in memory.
All of these options are available as listed above.
You can find more information at the <a href="https://db.apache.org/derby/docs/10.8/devguide/cdevdvlp17453.html#cdevdvlp17453">official documentation</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="injecting-a-datasource"><a class="anchor" href="#injecting-a-datasource"></a>Injecting a Datasource</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Because Quarkus uses CDI, injecting a datasource is very simple:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
AgroalDataSource defaultDataSource;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, the type is <code>AgroalDataSource</code> which is a subtype of <code>javax.sql.DataSource</code>.
Because of this, you can also use <code>javax.sql.DataSource</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="multiple-datasources"><a class="anchor" href="#multiple-datasources"></a>Multiple Datasources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Agroal allows you to configure multiple datasources.
It works exactly the same way as a single datasource, with one important change: a name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.driver=org.h2.Driver
quarkus.datasource.url=jdbc:h2:tcp://localhost/mem:default
quarkus.datasource.username=username-default
quarkus.datasource.min-size=3
quarkus.datasource.max-size=13

quarkus.datasource.users.driver=org.h2.Driver
quarkus.datasource.users.url=jdbc:h2:tcp://localhost/mem:users
quarkus.datasource.users.username=username1
quarkus.datasource.users.min-size=1
quarkus.datasource.users.max-size=11

quarkus.datasource.inventory.driver=org.h2.Driver
quarkus.datasource.inventory.url=jdbc:h2:tcp://localhost/mem:inventory
quarkus.datasource.inventory.username=username2
quarkus.datasource.inventory.min-size=2
quarkus.datasource.inventory.max-size=12</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice there&#8217;s an extra bit in the key.
The syntax is as follows: <code>quarkus.datasource.[optional name.][datasource property]</code>.</p>
</div>
<div class="sect2">
<h3 id="named-datasource-injection"><a class="anchor" href="#named-datasource-injection"></a>Named Datasource Injection</h3>
<div class="paragraph">
<p>When using multiple datasources, each <code>DataSource</code> also has the <code>io.quarkus.agroal.DataSource</code> qualifier with the name of the datasource in the property as the value.
Using the above properties to configure three different datasources, you can also inject each one as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
AgroalDataSource defaultDataSource;

@Inject
@DataSource("users")
AgroalDataSource dataSource1;

@Inject
@DataSource("inventory")
AgroalDataSource dataSource2;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="datasource-health-check"><a class="anchor" href="#datasource-health-check"></a>Datasource Health Check</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you are using the <code>quarkus-smallrye-health</code> extension, <code>quarkus-agroal</code> will automatically add a readiness health check
to validate the datasource.</p>
</div>
<div class="paragraph">
<p>So when you access the <code>/health/ready</code> endpoint of your application you will have information about the datasource validation status.
If you have multiple datasources, all datasources will be checked and the status will be <code>DOWN</code> as soon as there is one datasource validation failure.</p>
</div>
<div class="paragraph">
<p>This behavior can be disabled via the property <code>quarkus.datasource.health.enabled</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="datasource-metrics"><a class="anchor" href="#datasource-metrics"></a>Datasource Metrics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you are using the <code>quarkus-smallrye-metrics</code> extension, <code>quarkus-agroal</code> can expose some data source metrics on the
<code>/metrics</code> endpoint. This can be turned on by setting the property <code>quarkus.datasource.metrics.enabled</code> to true.</p>
</div>
<div class="paragraph">
<p>For the exposed metrics to contain any actual values, it is necessary that metric collection is enabled internally
by Agroal mechanisms. By default, this metric collection mechanism gets turned on for all data sources if the <code>quarkus-smallrye-metrics</code>
is present and metrics for the Agroal extension are enabled. If you want to disable metrics for a particular data source,
this can be done by setting <code>quarkus.datasource.enable-metrics</code> to <code>false</code> (or <code>quarkus.datasource.&lt;datasource name&gt;.enable-metrics</code> for a named datasource). This disables
collecting the metrics as well as exposing them in the <code>/metrics</code> endpoint, because it does not make sense to
expose metrics if the mechanism to collect them is disabled.</p>
</div>
<div class="paragraph">
<p>Conversely, setting <code>quarkus.datasource.enable-metrics</code> to <code>true</code> (or <code>quarkus.datasource.&lt;datasource name&gt;.enable-metrics</code> for a named datasource) explicitly can be used to enable collection of metrics even if
the <code>quarkus-smallrye-metrics</code> extension is not in use. This can be useful if you need to access the collected metrics programmatically.
They are available after calling <code>dataSource.getMetrics()</code> on an injected <code>AgroalDataSource</code> instance. If collection of metrics is disabled
for this data source, all values will be zero.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="narayana-transaction-manager-integration"><a class="anchor" href="#narayana-transaction-manager-integration"></a>Narayana Transaction Manager integration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If the Narayana JTA extension is also available, integration is automatic.</p>
</div>
<div class="paragraph">
<p>You can override this by setting the <code>transactions</code> configuration property - see the <a href="#configuration-reference">Configuration Reference</a> below.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="in-memory-databases"><a class="anchor" href="#in-memory-databases"></a>Testing with in-memory databases</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Some databases like H2 and Derby are commonly used in "embedded mode" as a facility to run quick integration tests.</p>
</div>
<div class="paragraph">
<p>Our suggestion is to use the real database you intend to use in production; container technologies made this simple enough so you no longer have an excuse. Still, there are sometimes
good reasons to also want the ability to run quick integration tests using the JVM powered databases,
so this is possible as well.</p>
</div>
<div class="paragraph">
<p>It is important to remember that when configuring H2 (or Derby) to use the embedded engine,
this will work as usual in JVM mode but such an application will not compile into a native image, as the Quarkus extensions only cover for making the JDBC client code compatible with the native compilation step: embedding the whole database engine into a native image is currently not implemented.</p>
</div>
<div class="paragraph">
<p>If you plan to run such integration tests in the JVM exclusively, it will of course work as usual.</p>
</div>
<div class="paragraph">
<p>If you want the ability to run such integration test in both JVM and/or native images, we have some cool helpers for you: just add either <code>@QuarkusTestResource(H2DatabaseTestResource.class)</code> or <code>@QuarkusTestResource(DerbyDatabaseTestResource.class)</code> on any class in your integration tests, this will make sure the testsuite starts (and stops) the embedded database into a separate process as necessary to run your tests.</p>
</div>
<div class="paragraph">
<p>These additional helpers are provided by the artifacts having Maven coordinates <code>io.quarkus:quarkus-test-h2:1.2.1.Final</code> and <code>io.quarkus:quarkus-test-derby:1.2.1.Final</code>, respectively for H2 and Derby.</p>
</div>
<div class="paragraph">
<p>Follows an example for H2:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package my.app.integrationtests.db;

import io.quarkus.test.common.QuarkusTestResource;
import io.quarkus.test.h2.H2DatabaseTestResource;

@QuarkusTestResource(H2DatabaseTestResource.class)
public class TestResources {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will allow you to test your application even when it&#8217;s compiled into a native image,
while the database will run in the JVM as usual.</p>
</div>
<div class="paragraph">
<p>Connect to it using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">quarkus.datasource.url=jdbc:h2:tcp://localhost/mem:test
quarkus.datasource.driver=org.h2.Driver</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-reference"><a class="anchor" href="#configuration-reference"></a>Agroal Configuration Reference</h2>
<div class="sectionbody">
<div class="paragraph configuration-legend">
<p><span class="icon"><i class="fa fa-archive" title="Fixed at build time"></i></span> Configuration property fixed at build time - <span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span>️ Configuration property overridable at runtime</p>
</div>
<table class="tableblock frame-all grid-all stretch configuration-reference searchable">
<colgroup>
<col style="width: 80%;">
<col style="width: 10%;">
<col style="width: 10%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-agroal_configuration"></a><a href="#quarkus-agroal_configuration">Configuration property</a></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">Type</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">Default</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-archive" title="Fixed at build time"></i></span> <a id="quarkus-agroal_quarkus.datasource.driver"></a><code><a href="#quarkus-agroal_quarkus.datasource.driver">quarkus.datasource.driver</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The datasource driver class name</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-archive" title="Fixed at build time"></i></span> <a id="quarkus-agroal_quarkus.datasource.transactions"></a><code><a href="#quarkus-agroal_quarkus.datasource.transactions">quarkus.datasource.transactions</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Whether we want to use regular JDBC transactions, XA, or disable all transactional capabilities.
 When enabling XA you will need a driver implementing <code>javax.sql.XADataSource</code>.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>enabled</code>, <code>xa</code>, <code>disabled</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>enabled</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-archive" title="Fixed at build time"></i></span> <a id="quarkus-agroal_quarkus.datasource.enable-metrics"></a><code><a href="#quarkus-agroal_quarkus.datasource.enable-metrics">quarkus.datasource.enable-metrics</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Enable datasource metrics collection. If unspecified, collecting metrics will be enabled by default if the smallrye-metrics extension is active.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-archive" title="Fixed at build time"></i></span> <a id="quarkus-agroal_quarkus.datasource.health.enabled"></a><code><a href="#quarkus-agroal_quarkus.datasource.health.enabled">quarkus.datasource.health.enabled</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Whether or not an health check is published in case the smallrye-health extension is present</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-archive" title="Fixed at build time"></i></span> <a id="quarkus-agroal_quarkus.datasource.metrics.enabled"></a><code><a href="#quarkus-agroal_quarkus.datasource.metrics.enabled">quarkus.datasource.metrics.enabled</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Whether or not datasource metrics are published in case the smallrye-metrics extension is present (default to false). NOTE: This is different from the "enable-metrics" property that needs to be set on data source level to enable collection of metrics for that data source.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.url"></a><code><a href="#quarkus-agroal_quarkus.datasource.url">quarkus.datasource.url</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The datasource URL</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.username"></a><code><a href="#quarkus-agroal_quarkus.datasource.username">quarkus.datasource.username</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The datasource username</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.password"></a><code><a href="#quarkus-agroal_quarkus.datasource.password">quarkus.datasource.password</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The datasource password</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.credentials-provider"></a><code><a href="#quarkus-agroal_quarkus.datasource.credentials-provider">quarkus.datasource.credentials-provider</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The credentials provider name</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.credentials-provider-type"></a><code><a href="#quarkus-agroal_quarkus.datasource.credentials-provider-type">quarkus.datasource.credentials-provider-type</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The credentials provider type.
 It is the <code>&#64;Named</code> value of the credentials provider bean. It is used to discriminate if multiple CredentialsProvider beans are available.
 For Vault it is: vault-credentials-provider. Not necessary if there is only one credentials provider available.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.initial-size"></a><code><a href="#quarkus-agroal_quarkus.datasource.initial-size">quarkus.datasource.initial-size</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The initial size of the pool. Usually you will want to set the initial size to match at least the minimal size, but this is not enforced so to allow for architectures which prefer a lazy initialization of the connections on boot, while being able to sustain a minimal pool size after boot.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.min-size"></a><code><a href="#quarkus-agroal_quarkus.datasource.min-size">quarkus.datasource.min-size</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The datasource pool minimum size</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.max-size"></a><code><a href="#quarkus-agroal_quarkus.datasource.max-size">quarkus.datasource.max-size</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The datasource pool maximum size</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>20</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.background-validation-interval"></a><code><a href="#quarkus-agroal_quarkus.datasource.background-validation-interval">quarkus.datasource.background-validation-interval</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The interval at which we validate idle connections in the background.
 Set to <code>0</code> to disable background validation.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html">Duration</a>
  <a href="#duration-note-anchor" title="More information about the Duration format"><span class="icon"><i class="fa fa-question-circle"></i></span></a></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>2M</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.acquisition-timeout"></a><code><a href="#quarkus-agroal_quarkus.datasource.acquisition-timeout">quarkus.datasource.acquisition-timeout</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The timeout before cancelling the acquisition of a new connection</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html">Duration</a>
  <a href="#duration-note-anchor" title="More information about the Duration format"><span class="icon"><i class="fa fa-question-circle"></i></span></a></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>5</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.leak-detection-interval"></a><code><a href="#quarkus-agroal_quarkus.datasource.leak-detection-interval">quarkus.datasource.leak-detection-interval</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The interval at which we check for connection leaks.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html">Duration</a>
  <a href="#duration-note-anchor" title="More information about the Duration format"><span class="icon"><i class="fa fa-question-circle"></i></span></a></p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.idle-removal-interval"></a><code><a href="#quarkus-agroal_quarkus.datasource.idle-removal-interval">quarkus.datasource.idle-removal-interval</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The interval at which we try to remove idle connections.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html">Duration</a>
  <a href="#duration-note-anchor" title="More information about the Duration format"><span class="icon"><i class="fa fa-question-circle"></i></span></a></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>5M</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.max-lifetime"></a><code><a href="#quarkus-agroal_quarkus.datasource.max-lifetime">quarkus.datasource.max-lifetime</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The max lifetime of a connection.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html">Duration</a>
  <a href="#duration-note-anchor" title="More information about the Duration format"><span class="icon"><i class="fa fa-question-circle"></i></span></a></p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.transaction-isolation-level"></a><code><a href="#quarkus-agroal_quarkus.datasource.transaction-isolation-level">quarkus.datasource.transaction-isolation-level</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The transaction isolation level.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>undefined</code>, <code>none</code>, <code>read-uncommitted</code>, <code>read-committed</code>, <code>repeatable-read</code>, <code>serializable</code></p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.detect-statement-leaks"></a><code><a href="#quarkus-agroal_quarkus.datasource.detect-statement-leaks">quarkus.datasource.detect-statement-leaks</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>When enabled Agroal will be able to produce a warning when a connection is returned to the pool without the application having closed all open statements. This is unrelated with tracking of open connections. Disable for peak performance, but only when there&#8217;s high confidence that no leaks are happening.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.new-connection-sql"></a><code><a href="#quarkus-agroal_quarkus.datasource.new-connection-sql">quarkus.datasource.new-connection-sql</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Query executed when first using a connection.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.validation-query-sql"></a><code><a href="#quarkus-agroal_quarkus.datasource.validation-query-sql">quarkus.datasource.validation-query-sql</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Query executed to validate a connection.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock"><a id="quarkus-agroal_quarkus.datasource.named-data-sources"></a><a href="#quarkus-agroal_quarkus.datasource.named-data-sources">Additional named datasources</a></p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">Type</p></th>
<th class="tableblock halign-left valign-middle"><p class="tableblock">Default</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-archive" title="Fixed at build time"></i></span> <a id="quarkus-agroal_quarkus.datasource.-datasource-name-.driver"></a><code><a href="#quarkus-agroal_quarkus.datasource.-datasource-name-.driver">quarkus.datasource."datasource-name".driver</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The datasource driver class name</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-archive" title="Fixed at build time"></i></span> <a id="quarkus-agroal_quarkus.datasource.-datasource-name-.transactions"></a><code><a href="#quarkus-agroal_quarkus.datasource.-datasource-name-.transactions">quarkus.datasource."datasource-name".transactions</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Whether we want to use regular JDBC transactions, XA, or disable all transactional capabilities.
 When enabling XA you will need a driver implementing <code>javax.sql.XADataSource</code>.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>enabled</code>, <code>xa</code>, <code>disabled</code></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>enabled</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-archive" title="Fixed at build time"></i></span> <a id="quarkus-agroal_quarkus.datasource.-datasource-name-.enable-metrics"></a><code><a href="#quarkus-agroal_quarkus.datasource.-datasource-name-.enable-metrics">quarkus.datasource."datasource-name".enable-metrics</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Enable datasource metrics collection. If unspecified, collecting metrics will be enabled by default if the smallrye-metrics extension is active.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.-datasource-name-.url"></a><code><a href="#quarkus-agroal_quarkus.datasource.-datasource-name-.url">quarkus.datasource."datasource-name".url</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The datasource URL</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.-datasource-name-.username"></a><code><a href="#quarkus-agroal_quarkus.datasource.-datasource-name-.username">quarkus.datasource."datasource-name".username</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The datasource username</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.-datasource-name-.password"></a><code><a href="#quarkus-agroal_quarkus.datasource.-datasource-name-.password">quarkus.datasource."datasource-name".password</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The datasource password</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.-datasource-name-.credentials-provider"></a><code><a href="#quarkus-agroal_quarkus.datasource.-datasource-name-.credentials-provider">quarkus.datasource."datasource-name".credentials-provider</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The credentials provider name</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.-datasource-name-.credentials-provider-type"></a><code><a href="#quarkus-agroal_quarkus.datasource.-datasource-name-.credentials-provider-type">quarkus.datasource."datasource-name".credentials-provider-type</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The credentials provider type.
 It is the <code>&#64;Named</code> value of the credentials provider bean. It is used to discriminate if multiple CredentialsProvider beans are available.
 For Vault it is: vault-credentials-provider. Not necessary if there is only one credentials provider available.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.-datasource-name-.initial-size"></a><code><a href="#quarkus-agroal_quarkus.datasource.-datasource-name-.initial-size">quarkus.datasource."datasource-name".initial-size</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The initial size of the pool. Usually you will want to set the initial size to match at least the minimal size, but this is not enforced so to allow for architectures which prefer a lazy initialization of the connections on boot, while being able to sustain a minimal pool size after boot.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.-datasource-name-.min-size"></a><code><a href="#quarkus-agroal_quarkus.datasource.-datasource-name-.min-size">quarkus.datasource."datasource-name".min-size</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The datasource pool minimum size</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.-datasource-name-.max-size"></a><code><a href="#quarkus-agroal_quarkus.datasource.-datasource-name-.max-size">quarkus.datasource."datasource-name".max-size</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The datasource pool maximum size</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>20</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.-datasource-name-.background-validation-interval"></a><code><a href="#quarkus-agroal_quarkus.datasource.-datasource-name-.background-validation-interval">quarkus.datasource."datasource-name".background-validation-interval</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The interval at which we validate idle connections in the background.
 Set to <code>0</code> to disable background validation.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html">Duration</a>
  <a href="#duration-note-anchor" title="More information about the Duration format"><span class="icon"><i class="fa fa-question-circle"></i></span></a></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>2M</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.-datasource-name-.acquisition-timeout"></a><code><a href="#quarkus-agroal_quarkus.datasource.-datasource-name-.acquisition-timeout">quarkus.datasource."datasource-name".acquisition-timeout</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The timeout before cancelling the acquisition of a new connection</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html">Duration</a>
  <a href="#duration-note-anchor" title="More information about the Duration format"><span class="icon"><i class="fa fa-question-circle"></i></span></a></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>5</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.-datasource-name-.leak-detection-interval"></a><code><a href="#quarkus-agroal_quarkus.datasource.-datasource-name-.leak-detection-interval">quarkus.datasource."datasource-name".leak-detection-interval</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The interval at which we check for connection leaks.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html">Duration</a>
  <a href="#duration-note-anchor" title="More information about the Duration format"><span class="icon"><i class="fa fa-question-circle"></i></span></a></p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.-datasource-name-.idle-removal-interval"></a><code><a href="#quarkus-agroal_quarkus.datasource.-datasource-name-.idle-removal-interval">quarkus.datasource."datasource-name".idle-removal-interval</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The interval at which we try to remove idle connections.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html">Duration</a>
  <a href="#duration-note-anchor" title="More information about the Duration format"><span class="icon"><i class="fa fa-question-circle"></i></span></a></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>5M</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.-datasource-name-.max-lifetime"></a><code><a href="#quarkus-agroal_quarkus.datasource.-datasource-name-.max-lifetime">quarkus.datasource."datasource-name".max-lifetime</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The max lifetime of a connection.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><a href="https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html">Duration</a>
  <a href="#duration-note-anchor" title="More information about the Duration format"><span class="icon"><i class="fa fa-question-circle"></i></span></a></p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.-datasource-name-.transaction-isolation-level"></a><code><a href="#quarkus-agroal_quarkus.datasource.-datasource-name-.transaction-isolation-level">quarkus.datasource."datasource-name".transaction-isolation-level</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>The transaction isolation level.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>undefined</code>, <code>none</code>, <code>read-uncommitted</code>, <code>read-committed</code>, <code>repeatable-read</code>, <code>serializable</code></p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.-datasource-name-.detect-statement-leaks"></a><code><a href="#quarkus-agroal_quarkus.datasource.-datasource-name-.detect-statement-leaks">quarkus.datasource."datasource-name".detect-statement-leaks</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>When enabled Agroal will be able to produce a warning when a connection is returned to the pool without the application having closed all open statements. This is unrelated with tracking of open connections. Disable for peak performance, but only when there&#8217;s high confidence that no leaks are happening.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.-datasource-name-.new-connection-sql"></a><code><a href="#quarkus-agroal_quarkus.datasource.-datasource-name-.new-connection-sql">quarkus.datasource."datasource-name".new-connection-sql</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Query executed when first using a connection.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><span class="icon"><i class="fa fa-cogs" title="Overridable at runtime"></i></span> <a id="quarkus-agroal_quarkus.datasource.-datasource-name-.validation-query-sql"></a><code><a href="#quarkus-agroal_quarkus.datasource.-datasource-name-.validation-query-sql">quarkus.datasource."datasource-name".validation-query-sql</a></code></p>
</div>
<div class="openblock description">
<div class="content">
<div class="paragraph">
<p>Query executed to validate a connection.</p>
</div>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-middle"></td>
</tr>
</tbody>
</table>
<div id="duration-note-anchor" class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">About the Duration format</div>
<div class="paragraph">
<p>The format for durations uses the standard <code>java.time.Duration</code> format.
You can learn more about it in the <a href="https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html#parse-java.lang.CharSequence-">Duration#parse() javadoc</a>.</p>
</div>
<div class="paragraph">
<p>You can also provide duration values starting with a number.
In this case, if the value consists only of a number, the converter treats the value as seconds.
Otherwise, <code>PT</code> is implicitly prepended to the value to obtain a standard <code>java.time.Duration</code> format.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
    </div>
  </div>
</div>

  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img src="/assets/images/quarkus_logo_horizontal_rgb_reverse.svg" class="project-logo" title="Quarkus"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">Quarkus is open. All dependencies of this project are available under the <a href='https://www.apache.org/licenses/LICENSE-2.0' target='_blank'>Apache Software License 2.0</a> or compatible license.<br /><br />This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a> is hosted on <a href='https://pages.github.com/' target='_blank'>Github Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/quarkusio/quarkusio.github.io' target='_blank'>fork the website</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <span>Navigation</span>
        <ul class="footer-links width-1-12">
          
            <li><a href="/">Home</a></li>
          
            <li><a href="/guides">Guides</a></li>
          
            <li><a href="/community/#contributing">Contribute</a></li>
          
            <li><a href="/faq">FAQ</a></li>
          
            <li><a href="/get-started">Get Started</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Contribute</span>
        <ul class="footer-links width-1-12">
          
            <li><a href="https://twitter.com/quarkusio">Follow us</a></li>
          
            <li><a href="https://github.com/quarkusio">GitHub</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <span>Get Help</span>
        <ul class="footer-links width-1-12">
          
            <li><a href="https://groups.google.com/forum/#!forum/quarkus-dev">Forums</a></li>
          
            <li><a href="https://quarkusio.zulipchat.com">Chatroom</a></li>
          
        </ul>
      </div>
    

    
      <div class="width-3-12 more-links">
        <span>Quarkus is made of community projects</span>
        <ul class="footer-links">
          
            <li><a href="https://vertx.io/" target="_blank">Eclipse Vert.x</a></li>
          
            <li><a href="https://microprofile.io" target="_blank">Eclipse MicroProfile</a></li>
          
            <li><a href="https://hibernate.org" target="_blank">Hibernate</a></li>
          
            <li><a href="https://netty.io" target="_blank">Netty</a></li>
          
            <li><a href="https://resteasy.github.io" target="_blank">RESTEasy</a></li>
          
            <li><a href="https://camel.apache.org" target="_blank">Apache Camel</a></li>
          
            <li><a href="https://code.quarkus.io/" target="_blank">And many more...</a></li>
          
        </ul>
      </div>
    
  </div>
</div>
  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a> | <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
    </span>
    <span class="redhat">
      Sponsored by
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/images/redhat_reversed.svg"></a>
    </span>
  </div>
</div>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" integrity="sha384-8gBf6Y4YYq7Jx97PIqmTwLPin4hxIzQw5aDmUg/DDhul9fFpbbLcLh3nTIIDJKhx" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/scroll-down.js"></script>
  <script src="/assets/javascript/satellite.js" type="text/javascript"></script>
  <script src="https://quarkus.io/guides/javascript/config.js" type="text/javascript"></script>
</body>

</html>
